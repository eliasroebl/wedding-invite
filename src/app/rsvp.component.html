<div class="flex flex-col md:flex-row h-screen w-screen m-0 p-0">
  <div class="fixed top-0 left-0 z-20 overflow-hidden w-screen h-45 sm:h-50 md:w-1/3 md:h-screen">
    <img
      src="couple-photo.jpeg"
      alt="Soon to be weds"
      class="w-full h-full object-cover object-center block"
    />
    <img src="names.png" alt="Pamela & Elias" class="names-overlay" />
  </div>

  <div class="fixed top-45 left-0 w-screen h-[calc(100vh-11.25rem)] sm:top-50 sm:h-[calc(100vh-12.5rem)] md:top-0 md:left-1/3 md:w-2/3 md:h-screen bg-white flex flex-col items-center justify-start box-border overflow-y-auto pt-20 px-4 pb-4 sm:pt-10 sm:px-5 md:pt-44 md:px-10 md:pb-10">
    <img src="eucalyptus.png" alt="Eucalyptus decoration" class="eucalyptus-overlay" />
    <img src="olive.png" alt="Olive decoration" class="olive-overlay" />
    <div class="text-center max-w-2xl p-5 relative z-10 w-full h-full min-h-full bg-white box-border">
      <h2 class="font-heading rsvp-title">Antwort auf die Hochzeitseinladung</h2>

      @if (hasAlreadySubmitted) {
        <div class="already-submitted-message">
          <h3 class="font-heading">Antwort bereits gesendet</h3>
          <p class="font-body">{{ getAlreadySubmittedText() }}</p>
          
          <h4 class="font-heading">{{ getResponseHeaderText() }}</h4>
          <div class="submitted-response">
            <p class="font-body"><strong>Teilnahme:</strong> {{ getSubmittedAcceptanceText() }}</p>
            @if (rsvpData.accepted && rsvpData.dietaryPreferences) {
              <p class="font-body"><strong>Ernährungswünsche:</strong> {{ rsvpData.dietaryPreferences }}</p>
            }
            @if (rsvpData.anmerkung) {
              <p class="font-body"><strong>Anmerkungen:</strong> {{ rsvpData.anmerkung }}</p>
            }
          </div>
          
          <p class="font-body change-notice">{{ getChangeNoticeText() }}</p>
          
          <div class="rsvp-form-buttons">
            <button class="btn-outline font-heading" (click)="backToInvitation()">Zurück zur Einladung</button>
          </div>
        </div>
      } @else {
        <div class="acceptance-section">
          <h3 class="font-heading">{{ getAttendanceQuestion() }}</h3>
          <div class="acceptance-buttons">
            <button
              class="btn-outline font-heading"
              [class.active]="rsvpData.accepted === true"
              (click)="rsvpData.accepted = true">
              ✓ {{ getAcceptanceText() }}
            </button>
            <button
              class="btn-outline font-heading"
              [class.active]="rsvpData.accepted === false"
              (click)="rsvpData.accepted = false">
              ✗ {{ getDeclineText() }}
            </button>
          </div>
        </div>

        @if (rsvpData.accepted === true) {
          <div class="dietary-section">
            <h3 class="font-heading">Besondere Ernährungswünsche</h3>
            <p class="dietary-intro font-body">{{ getDietaryIntroText() }}</p>
            <textarea
              class="dietary-textarea font-body"
              placeholder="z.B. Ich bin Vegetarier, die Kinder essen nur Nudeln ohne Soße..."
              [(ngModel)]="rsvpData.dietaryPreferences"
              rows="3">
            </textarea>
          </div>
        }

        <div class="anmerkung-section">
          <h3 class="font-heading">Anmerkungen</h3>
          <textarea
            class="anmerkung-textarea font-body"
            [placeholder]="getCommentsPlaceholder()"
            [(ngModel)]="rsvpData.anmerkung"
            rows="4">
          </textarea>
        </div>

        <div class="rsvp-form-buttons">
          <button class="btn-outline font-heading" [class.btn-disabled]="isSubmitting" (click)="backToInvitation()" [disabled]="isSubmitting">Zurück</button>
          <button 
            class="btn-primary font-heading" 
            [class.loading]="isSubmitting"
            [class.btn-disabled]="isSubmitting"
            [disabled]="isSubmitting"
            (click)="submitRsvp()">
            @if (isSubmitting) {
              <span class="loading-spinner"></span>
              Wird gesendet...
            } @else {
              Antwort senden
            }
          </button>
        </div>
      }
    </div>
  </div>
</div>